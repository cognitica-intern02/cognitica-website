<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Cognitica — Timeline (Animation-safe)</title>
<style>
:root{
  --c-blue:#0031C9; --c-sky:#4A6BFF; --c-teal:#00C2CC; --c-pink:#FF97C2;
  --bg:#F6F7FB; --muted:#6b7a90; --maxw:1200px;
}
html,body{height:100%;margin:0;padding:0;background:var(--bg);font-family:Inter, "Segoe UI", system-ui;}
.wrap{max-width:var(--maxw);margin:48px auto;padding:0 18px;box-sizing:border-box;}
h1{ text-align:center; margin:8px 0 36px; font-size:28px; color:#0f1724; }

/* timeline container & track */
.timeline{ position:relative; padding:20px 0 80px; }
.track-wrap{ position:absolute; left:50%; top:0; transform:translateX(-50%); width:14px; height:100%; pointer-events:none; z-index:0; }
.track{ width:100%; height:100%; background:#eaf2ff; border-radius:10px; position:relative; }
.track .progress{ position:absolute; left:0; top:0; width:100%; height:0; background:linear-gradient(180deg,var(--c-blue),var(--c-teal),var(--c-pink)); border-radius:8px; transition:height .12s linear; }

/* row grid: left | center | right */
.row{ display:grid; grid-template-columns: 1fr 100px 1fr; gap:16px; align-items:center; margin:46px 0; position:relative; z-index:2; }
.left,.center,.right{ padding:0 8px; box-sizing:border-box; }

/* marker (in center column, fixed position in flow) */
.marker{ width:26px; height:26px; border-radius:50%; background:#fff; border:3px solid rgba(255,255,255,0.95); box-shadow:0 10px 30px rgba(12,40,120,0.12); display:flex; align-items:center; justify-content:center; margin:auto; position:relative; z-index:4; }
.marker::after{ content:""; width:12px; height:12px; border-radius:50%; background:linear-gradient(90deg,var(--c-blue),var(--c-pink)); box-shadow:0 6px 18px rgba(15,86,255,0.12); display:block; }

/* cards (only use transform & opacity for animation) */
.card{ background:#fff; padding:18px; border-radius:12px; box-shadow:0 28px 60px rgba(12,40,120,0.06); max-width:100%; transform:translateY(18px); opacity:0; transition:transform .55s cubic-bezier(.2,.9,.25,1),opacity .45s ease; position:relative; z-index:3; }
.card.visible{ transform:translateY(0); opacity:1; }

.left .card{ margin-right:36px; text-align:right; }
.right .card{ margin-left:36px; text-align:left; }

.title{ color:var(--c-blue); font-weight:700; font-size:16px; margin-bottom:8px; }
.desc{ color:var(--muted); font-size:14px; line-height:1.45; margin:0; }

/* active marker visual (optional subtle halo) */
.marker.active{ box-shadow:0 12px 36px rgba(15,86,255,0.2); }

@media (max-width:900px){
  .row{ grid-template-columns: 40px 1fr; }
  .left,.right{ grid-column:2/3; padding-left:10px; }
  .center{ grid-column:1/2; display:flex; justify-content:center; }
  .track-wrap{ left:20px; transform:none; width:10px; }
  .left .card, .right .card{ text-align:left; margin:0; }
}
</style>
</head>
<body>
  <div class="wrap">
    <h1>Cognitica — Safety Improvement Journey</h1>

    <div class="timeline" id="timeline">
      <div class="track-wrap"><div class="track" id="track"><div id="progress" class="progress"></div></div></div>

      <!-- ROW 1 -->
      <div class="row">
        <div class="left">
          <div class="card" id="c1"><div class="title">Getting started is simple</div><p class="desc">Begin your safety transformation quickly with minimal setup.</p></div>
        </div>
        <div class="center"><div class="marker" data-idx="0"></div></div>
        <div class="right"></div>
      </div>

      <!-- ROW 2 -->
      <div class="row">
        <div class="left"></div>
        <div class="center"><div class="marker" data-idx="1"></div></div>
        <div class="right"><div class="card" id="c2"><div class="title">Prepare Your Company For the Future</div><p class="desc">Adopt AI-driven safety systems that scale with your operations.</p></div></div>
      </div>

      <!-- ROW 3 -->
      <div class="row">
        <div class="left"><div class="card" id="c3"><div class="title">Prevent Accidents Early</div><p class="desc">Stop incidents before they happen with real-time computer vision.</p></div></div>
        <div class="center"><div class="marker" data-idx="2"></div></div>
        <div class="right"></div>
      </div>

      <!-- ROW 4 -->
      <div class="row">
        <div class="left"></div>
        <div class="center"><div class="marker" data-idx="3"></div></div>
        <div class="right"><div class="card" id="c4"><div class="title">Understand Safety Issues</div><p class="desc">Identify behavioral and operational risks with clear insights.</p></div></div>
      </div>

      <!-- ROW 5 -->
      <div class="row">
        <div class="left"><div class="card" id="c5"><div class="title">A Complete View of All Facilities</div><p class="desc">Monitor every zone from a single unified dashboard.</p></div></div>
        <div class="center"><div class="marker" data-idx="4"></div></div>
        <div class="right"></div>
      </div>

      <!-- ROW 6 -->
      <div class="row">
        <div class="left"></div>
        <div class="center"><div class="marker" data-idx="5"></div></div>
        <div class="right"><div class="card" id="c6"><div class="title">Review Near-Miss Cases</div><p class="desc">Analyze past incidents to build proactive safety strategies.</p></div></div>
      </div>

      <!-- ROW 7 -->
      <div class="row">
        <div class="left"><div class="card" id="c7"><div class="title">Make Your Machines Intelligent</div><p class="desc">Let your industrial machines detect humans and prevent errors instantly.</p></div></div>
        <div class="center"><div class="marker" data-idx="6"></div></div>
        <div class="right"></div>
      </div>

      <!-- ROW 8 -->
      <div class="row">
        <div class="left"></div>
        <div class="center"><div class="marker" data-idx="7"></div></div>
        <div class="right"><div class="card" id="c8"><div class="title">See Your Safety Situation Clearly</div><p class="desc">Get complete, real-time visibility across your entire operation.</p></div></div>
      </div>

    </div>
  </div>

<script>
// Animation-safe progress: progress goes from top of first marker center to center of last visible marker
(function(){
  const timeline = document.getElementById('timeline');
  const progress = document.getElementById('progress');
  const markers = Array.from(document.querySelectorAll('.marker'));
  const cards = Array.from(document.querySelectorAll('.card'));

  // reveal cards when they enter - cards animate using transform & opacity only (no reflow)
  const cardObserver = new IntersectionObserver((entries)=>{
    entries.forEach(e => {
      if(e.isIntersecting) e.target.classList.add('visible');
    });
  }, { threshold: 0.25 });
  cards.forEach(c => cardObserver.observe(c));

  // observe markers to know which are in viewport to compute progress
  const markerObserver = new IntersectionObserver((entries) => {
    // add 'active' class when marker center is visible (~ used for indicator)
    entries.forEach(en => {
      const m = en.target;
      if(en.isIntersecting) m.classList.add('active'); else m.classList.remove('active');
    });
  }, { root: null, threshold: 0.5 });

  markers.forEach(m => markerObserver.observe(m));

  function updateProgress() {
    if(markers.length === 0) return;
    // compute page Y for first marker center and last marker center that is above bottom viewport
    const firstRect = markers[0].getBoundingClientRect();
    const firstCenterPageY = window.scrollY + firstRect.top + firstRect.height/2;

    // determine last marker to include: either last marker whose center is above viewport bottom, or the last marker if scrolled past
    const viewportBottom = window.scrollY + window.innerHeight;
    let lastIncluded = markers[0];
    for(let i=0;i<markers.length;i++){
      const r = markers[i].getBoundingClientRect();
      const centerPageY = window.scrollY + r.top + r.height/2;
      if(centerPageY <= viewportBottom - 20) lastIncluded = markers[i];
    }
    const lastRect = lastIncluded.getBoundingClientRect();
    const lastCenterPageY = window.scrollY + lastRect.top + lastRect.height/2;

    // compute distance (clamped)
    const timelineTop = window.scrollY + timeline.getBoundingClientRect().top;
    const timelineBottom = timelineTop + timeline.scrollHeight;
    const startY = Math.max(timelineTop, firstCenterPageY);
    const endY = Math.min(timelineBottom, lastCenterPageY);
    const totalDist = Math.max(1, timelineBottom - timelineTop);
    const filled = Math.max(0, Math.min(1, (endY - timelineTop) / totalDist));

    progress.style.height = (filled*100) + '%';
  }

  // throttle
  function throttle(fn, wait){
    let last=0;
    return function(...args){
      const now = Date.now();
      if(now-last>wait){ last=now; fn.apply(this,args); last=now; }
    }
  }

  window.addEventListener('scroll', throttle(updateProgress,12));
  window.addEventListener('resize', throttle(updateProgress,60));
  window.addEventListener('load', ()=>{ setTimeout(updateProgress,120); });
  setTimeout(updateProgress,160);
})();
</script>
</body>
</html>
